####################################################
# UILOVELACE - MAIN                                #
####################################################

- title: Main
  icon: mdi:home
  # Unique path for direct access /lovelace/${path}
  path: main
  visible: true
  badges:
    - sensor.time
    - device_tracker.life360_jean
    - device_tracker.life360_cindy
    - device_tracker.life360_cody
    - sun.sun
    - type: state-label
      entity: sensor.moon_phases
      show_name: false
      show_icon: false
  cards:
  # Entities card will take a list of entities and show their state.
  # The entities here will be shown in the same order as specified.
  # Each entry is an entity ID or a map with extra options.
    - type: custom:bignumber-card
      entity: sensor.dates
      scale: 25px
    # - type: entities
      # #title: Season
      # show_header_toggle: false
      # #color_state: true
      # ##state_color: true
      # entities:
        # - sensor.season
    # - type: custom:monster-card
    #   card:
    #     type: glance
    #   filter:
    #     include:
    #       - entity_id: sensor.season
        
    # - type: custom:button-card
    #   color_type: card
    #   entity: binary_sensor.flashing_1s
    #   name: Intruder Alert
    #   state:
    #     - value: "on"
    #       color: red
    #       icon: mdi:alert
    #       styles:
    #         card:
    #           - animation: blink 2s ease infinite
    #     - operator: default
    #       color: green
    #       icon: mdi:shield-check

    - type: entities
      title: Lighting & Decoration
      show_header_toggle: false
      #color_state: true
      ##state_color: true
      entities:
        - type: custom:fold-entity-row
          head: binary_sensor.lamppost_status
          entities:
            - input_select.lamppost_mode
        - type: custom:fold-entity-row
          head: binary_sensor.frontdoorlight_status
          entities:
            - input_select.frontdoorlight_mode
            - type: conditional
              conditions:
                - entity: input_select.frontdoorlight_mode
                  state: "Switch Mode"
              row:
                entity: switch.front_door_light
        - type: custom:fold-entity-row
          head: binary_sensor.poweroutlet_status
          entities:
            - input_select.poweroutlet_mode
            - type: conditional
              conditions:
                - entity: input_select.poweroutlet_mode
                  state: 'Fountain'
              row:
                entity: binary_sensor.antifreeze_active
        - type: custom:fold-entity-row
          head: binary_sensor.garagefrontlight_status
          entities:
            - input_select.garagefrontlight_mode
        - type: custom:fold-entity-row
          head: binary_sensor.garagefrontpower_status
          entities:
            - input_select.garagefrontpower_mode
        
    - type: entities
      title: Power usage
      show_header_toggle: false
      entities: 
        - type: custom:decluttering-card
          template: energy_all

    - type: entities
      title: Home Presences
      show_header_toggle: false
      entities: 
        - type: custom:decluttering-card
          template: people_iphone_data
          variables:
            - name: 'jean'
            - workplace: 'on'
            - jean: 'on'
        - type: custom:decluttering-card
          template: people_iphone_data
          variables:
            - name: 'cindy'
            - workplace: 'off'
            - cindy: 'on'
        - type: custom:fold-entity-row
          head: device_tracker.life360_cody
          entities:
            - input_select.cody_presence
            - type: custom:fold-entity-row
              head:
                type: section
                label: Others
              entities:
                - binary_sensor.workday_cody
                - type: "custom:secondaryinfo-entity-row"
                  entity: sensor.cody_s_birthday
                  secondary_info: "Birthday: {{ as_timestamp(states.sensor.cody_s_birthday.attributes.date) | timestamp_custom('%Y-%m-%d') }} => {{ states.sensor.cody_s_birthday.attributes.current_years }} y/o"
                - sensor.party_18_ans_cody
        # - type: custom:decluttering-card
          # template: people_ipad_data
          # variables:
            # - name: 'cindy'
        - sensor.distance_jean_cindy
        - type: custom:multiple-entity-row
          entity: sensor.random_number_generator
          name: SecurID
          secondary_info:
            attribute: time_left
            name: Time Left
            #unit: 's'
            format: precision0
          entities:
            - icon: mdi:shield-refresh
              state_color: true
              tap_action:
                action: call-service
                service: automation.trigger
                service_data:
                  entity_id: automation.random_number_generator
        
    - type: entities
      title: Postal Status
      show_header_toggle: false
      entities:
        - type: custom:fold-entity-row
          head: sensor.postal_status
          entities:
            - type: "custom:secondaryinfo-entity-row"
              entity: switch.postal_status
              #secondary_info: "Battery: [[ sensor.postal_status.attributes.battery ]]%"
              secondary_info: 'Battery: [[ if(sensor.postal_status == unavailable, "N/A", if(sensor.postal_status == unknown, "N/A", sensor.postal_status.attributes.battery)) ]]%'
            - type: "custom:secondaryinfo-entity-row"
              entity: switch.postal_status_activate_delay
              #secondary_info: "Time Left: [[ switch.postal_status.attributes.delay ]]"
              secondary_info: 'Time Left: [[ if(sensor.postal_status == unavailable, "N/A", if(sensor.postal_status == unknown, "N/A", switch.postal_status.attributes.delay)) ]]'
            - entity: sensor.last_postal_arrival
            - entity: sensor.last_postal_removal
            - type: custom:fold-entity-row
              head:
                type: section
                label: Automations
              entities:
                - automation.publish_postal_arrival
                - automation.publish_postal_removal
      
    - type: entities
      title: Vacuums
      show_header_toggle: false
      entities:
        - vacuum.roomba_irobot
        # - type: custom:entity-attributes-card
        #   entity: vacuum.roomba_irobot
        #   filter:
        #     include:
        #       - vacuum.roomba_irobot.status
        #       - vacuum.roomba_irobot.bin_full
        #       - vacuum.roomba_irobot.battery_level
        
    - type: entities
      title: Trash/Recycle/Compost
      show_header_toggle: false
      entities:
        - type: custom:decluttering-card
          template: collect
          variables:
            - name: 'trash'
        - type: custom:decluttering-card
          template: collect
          variables:
            - name: 'recycle'
        - type: custom:decluttering-card
          template: collect
          variables:
            - name: 'compost'
                
    - type: entities
      title: Doors, Locks & Bells
      show_header_toggle: false
      entities:
        - type: custom:decluttering-card
          template: lock_all
        - type: custom:decluttering-card
          template: powerbolt2_bell
          variables:
            - door: 'house_fd'
            - doorbell_tf: 'on'
            - doorbell_bf: 'on'
        - type: custom:decluttering-card
          template: powerbolt2_bell
          variables:
            - door: 'house_bd'
            - doorbell_tf: 'on'
            - doorbell_bf: 'on'
        - type: custom:decluttering-card
          template: powerbolt2
          variables:
            - door: 'house_mbd'
            - doorbell_tf: 'off'
            - doorbell_bf: 'off'
        - type: custom:decluttering-card
          template: powerbolt2_bell
          variables:
            - door: 'garage_fd'
            - doorbell_g: 'on'
        - type: custom:decluttering-card
          template: garage_opener
          variables:
            - door: 'garage_cd'
        - type: custom:decluttering-card
          template: door_lock
          variables:
            - door: 'garage_bd'
        - type: custom:decluttering-card
          template: powerbolt2_shed
          variables:
            - door: 'shed_fd'
            - ldoor: 'shed_ld'
            - rdoor: 'shed_rd'
        - type: custom:decluttering-card
          template: powerbolt2
          variables:
            - door: 'glasshouse_fd'
        - type: custom:decluttering-card
          template: door_lock
          variables:
            - door: 'pool_fd'
        - type: custom:decluttering-card
          template: door_lock
          variables:
            - door: 'pool_td'
        - type: custom:decluttering-card
          template: gates
        - type: custom:decluttering-card
          template: doorchime_global
          
    # - type: glance
      # show_icon: true
      # show_name: true
      # show_state: true
      # title: COVID-19
      # columns: 4
      # entities:
        # - entity: sensor.worldwide_coronavirus_confirmed
          # icon: 'mdi:emoticon-neutral-outline'
          # name: W - Confirmed
        # - entity: sensor.worldwide_coronavirus_current
          # icon: 'mdi:emoticon-frown-outline'
          # name: W - Current
        # - entity: sensor.worldwide_coronavirus_recovered
          # icon: 'mdi:emoticon-happy-outline'
          # name: W - Recovered
        # - entity: sensor.worldwide_coronavirus_deaths
          # icon: 'mdi:emoticon-dead-outline'
          # name: W - Deaths
        # - entity: sensor.canada_coronavirus_confirmed
          # icon: 'mdi:emoticon-neutral-outline'
          # name: C - Confirmed
        # - entity: sensor.canada_coronavirus_current
          # icon: 'mdi:emoticon-frown-outline'
          # name: C - Current
        # - entity: sensor.canada_coronavirus_recovered
          # icon: 'mdi:emoticon-happy-outline'
          # name: C - Recovered
        # - entity: sensor.canada_coronavirus_deaths
          # icon: 'mdi:emoticon-dead-outline'
          # name: C - Deaths
        # - entity: sensor.jean
        
    # - type: entities
      # title: Quarantine
      # show_header_toggle: false
      # #state_color: true
      # entities:
        # - entity: sensor.jean
        
    - type: entities
      title: Watering & Irrigation
      show_header_toggle: false
      #state_color: true
      entities:
        - type: custom:fold-entity-row
          head: binary_sensor.frontyardirrigation_status
          entities:
          - input_select.frontyardirrigation_mode
          - input_datetime.frontyardirrigation_start
          - input_datetime.frontyardirrigation_stop
          - automation.frontyard_irrigation_control
        - type: custom:fold-entity-row
          head: binary_sensor.gardenirrigation_status
          entities:
          - input_select.gardenirrigation_mode
          - input_datetime.gardenirrigation_start
          - input_datetime.gardenirrigation_stop
          - input_select.gardenirrigationaux_mode
          - input_datetime.gardenirrigationaux_start
          - input_datetime.gardenirrigationaux_stop
          #- automation.garden_irrigation_control
          - type: "custom:button-entity-row"
            buttons:
              - entity: input_boolean.gardenirrigation_start30m
                name: 30 min
                icon: "mdi:play"
              - entity: input_boolean.gardenirrigation_start1h
                name: 1 hour
                icon: "mdi:play"
              - entity: input_boolean.gardenirrigation_cancel
                name: Stop
                icon: "mdi:stop"
                
    - type: entities
      title: Curtains
      show_header_toggle: false
      #state_color: true
      entities:
        - type: custom:fold-entity-row
          head: sensor.patio_door_tulle_curtain
          entities:
            - type: "custom:secondaryinfo-entity-row"
              entity: cover.patio_door_tulle_curtain
              secondary_info: '[[ {entity}.attributes.current_position ]] % opened'
            - input_select.patio_door_tulle_curtain
            - automation.patio_door_tulle_curtain
        - type: custom:fold-entity-row
          head: sensor.patio_door_curtain_curtain
          entities:
            - type: "custom:secondaryinfo-entity-row"
              entity: cover.patio_door_curtain_curtain
              secondary_info: '[[ {entity}.attributes.current_position ]] % opened'
            - input_select.patio_door_curtain_curtain
            - automation.patio_door_curtain_curtain
        - type: custom:fold-entity-row
          head: sensor.dining_room_tulle_curtain
          entities:
            - type: "custom:secondaryinfo-entity-row"
              entity: cover.dining_room_tulle_curtain
              secondary_info: '[[ {entity}.attributes.current_position ]] % opened'
            - input_select.dining_room_tulle_curtain
            - automation.dining_room_tulle_curtain
        - type: custom:fold-entity-row
          head: sensor.dining_room_curtain_curtain
          entities:
            - type: "custom:secondaryinfo-entity-row"
              entity: cover.dining_room_curtain_curtain
              secondary_info: '[[ {entity}.attributes.current_position ]] % opened'
            - input_select.dining_room_curtain_curtain
            - automation.dining_room_curtain_curtain

